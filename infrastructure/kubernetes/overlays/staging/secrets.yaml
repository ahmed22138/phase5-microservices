# Staging Secrets Configuration (External Secrets Template)
# Task: P5-T-115
# In production, use External Secrets Operator or cloud-native secrets management
# This file provides the template structure for cloud secret references

# External Secrets Store (configure for your cloud provider)
# Uncomment and configure based on your secrets management solution:
#
# For AWS Secrets Manager:
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: aws-secrets-store
# spec:
#   provider:
#     aws:
#       service: SecretsManager
#       region: us-east-1
#       auth:
#         jwt:
#           serviceAccountRef:
#             name: external-secrets-sa
#
# For Azure Key Vault:
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: azure-keyvault-store
# spec:
#   provider:
#     azurekv:
#       vaultUrl: "https://your-keyvault.vault.azure.net"
#       authSecretRef:
#         clientId:
#           name: azure-secrets
#           key: client-id
#         clientSecret:
#           name: azure-secrets
#           key: client-secret
#
# For GCP Secret Manager:
# apiVersion: external-secrets.io/v1beta1
# kind: SecretStore
# metadata:
#   name: gcp-secrets-store
# spec:
#   provider:
#     gcpsm:
#       projectID: your-project-id
#       auth:
#         workloadIdentity:
#           clusterLocation: us-central1
#           clusterName: your-cluster
#           serviceAccountRef:
#             name: external-secrets-sa

---
# Task Service Database Credentials (External Secret Reference)
apiVersion: v1
kind: Secret
metadata:
  name: task-db-credentials
  annotations:
    # Replace with actual external secret reference in production
    external-secrets.io/managed: "true"
    secrets-manager/secret-name: "phase5/staging/task-db"
type: Opaque
stringData:
  host: "${TASK_DB_HOST}"
  username: "${TASK_DB_USERNAME}"
  password: "${TASK_DB_PASSWORD}"
  database: "task_db"
  ssl-mode: "require"
---
# Reminder Service Database Credentials
apiVersion: v1
kind: Secret
metadata:
  name: reminder-db-credentials
  annotations:
    external-secrets.io/managed: "true"
    secrets-manager/secret-name: "phase5/staging/reminder-db"
type: Opaque
stringData:
  host: "${REMINDER_DB_HOST}"
  username: "${REMINDER_DB_USERNAME}"
  password: "${REMINDER_DB_PASSWORD}"
  database: "reminder_db"
  ssl-mode: "require"
---
# Recurrence Service Database Credentials
apiVersion: v1
kind: Secret
metadata:
  name: recurrence-db-credentials
  annotations:
    external-secrets.io/managed: "true"
    secrets-manager/secret-name: "phase5/staging/recurrence-db"
type: Opaque
stringData:
  host: "${RECURRENCE_DB_HOST}"
  username: "${RECURRENCE_DB_USERNAME}"
  password: "${RECURRENCE_DB_PASSWORD}"
  database: "recurrence_db"
  ssl-mode: "require"
---
# Audit Service Database Credentials (TimescaleDB)
apiVersion: v1
kind: Secret
metadata:
  name: audit-db-credentials
  annotations:
    external-secrets.io/managed: "true"
    secrets-manager/secret-name: "phase5/staging/audit-db"
type: Opaque
stringData:
  host: "${AUDIT_DB_HOST}"
  username: "${AUDIT_DB_USERNAME}"
  password: "${AUDIT_DB_PASSWORD}"
  database: "audit_db"
  ssl-mode: "require"
---
# Kafka Credentials
apiVersion: v1
kind: Secret
metadata:
  name: kafka-credentials
  annotations:
    external-secrets.io/managed: "true"
    secrets-manager/secret-name: "phase5/staging/kafka"
type: Opaque
stringData:
  bootstrap-servers: "${KAFKA_BOOTSTRAP_SERVERS}"
  sasl-username: "${KAFKA_SASL_USERNAME}"
  sasl-password: "${KAFKA_SASL_PASSWORD}"
  security-protocol: "SASL_SSL"
  sasl-mechanism: "PLAIN"
